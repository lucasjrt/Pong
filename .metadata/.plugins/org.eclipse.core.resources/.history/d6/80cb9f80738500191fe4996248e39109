package br.ufu.facom.poo;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Rectangle;

import br.facom.ufu.poo.FPong;
import br.facom.ufu.poo.logica.Mediador;
import br.facom.ufu.poo.objetos.FBola;
import br.facom.ufu.poo.objetos.FJogador;

public class PongGame extends FPong implements Runnable{
	private static final long serialVersionUID = 1L;
	
	private final int FPS = 40;
	
	private Thread thread;
	private Image img;
	private Graphics g;

	private FBola bola;
	private FJogador j;
	
	private Mediador med;


	public static void main(String[] args) {
		PongGame p = new PongGame();
		System.out.println("Teste");
		p.inicializar();
		p.iniciar();
	}
	
	public void inicializar() {
		med = new Mediador();
		bola = new FBola(med);
		bola.setPosicao(LARGURA_TELA >> 1, ALTURA_TELA >> 1);
		j = new FJogador(this, 0, new Rectangle(10, 525), med);
		img = createImage(LARGURA_TELA, ALTURA_TELA);
		g = img.getGraphics();
	}

	public void iniciar() {
		thread = new Thread(this, "Game");
		thread.start();
	}

	public void parar() {
		thread.interrupt();
	}

	public void paint(Graphics g) {
		g.drawImage(img, 0, 0, LARGURA_TELA, ALTURA_TELA, this);
	}

	public void update(Graphics g) {
		paint(g);
	}

	@Override
	public void run() {
		try {
			while (true) {
				desenhaCampo(g);
				bola.desenhar(g);
				j.desenhar(g);
				g.setColor(Color.white);
				g.drawLine(0, ALTURA_TELA >> 1, LARGURA_TELA, ALTURA_TELA >> 1);
				g.drawLine(LARGURA_TELA >> 1, 0, LARGURA_TELA >> 1, ALTURA_TELA);
				repaint();
				Thread.sleep((int) (1000 / FPS));
				// bloco.move(bloco.getX() + 1, bloco.getY() + 1);
			}
		} catch (InterruptedException ie) {
			System.err.print("Interrompido!\n" + ie);
		}
	}
	
	private void desenhaCampo(Graphics g) {
		
	}

}
