package br.facom.ufu.poo;

import java.awt.Color;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Panel;

import br.facom.ufu.poo.objetos.Bola;

public class TestScene extends Panel implements Runnable {
	private static final long serialVersionUID = 1L;
	public final static int WIDTH = 800;
	public final static int HEIGHT = 600;
	private final int FRAME_RATE = 30;
	
	private Thread thread;
	private Image img;
	private Graphics g;
	
	private Bola bola;
	
	public TestScene() {
		
	}
	
	public void init() {
		bola = new Bola(10, 10);
		img = createImage(WIDTH, HEIGHT);
		g = img.getGraphics();
	}
	
	public void start() {
		thread = new Thread(this, "Game");
		thread.start();
	}
	
	public void stop() {
		thread.interrupt();
	}
	
	public void paint(Graphics g) {
		g.drawImage(img, 0, 0, WIDTH, HEIGHT, this);
		System.out.println("paint");
	}
	
	public void update(Graphics g) {
		paint(g);
		System.out.println("update");
	}

	@Override
	public void run() {
		try  {
            while (true) {
                g.setColor(Color.black);
                g.fillRect(0, 0, WIDTH, HEIGHT);
                bola.draw(g);
                repaint();
                Thread.sleep((int)(1000/FRAME_RATE));
            }
        } 
        catch (InterruptedException ie) 
        { 
            System.err.print("Interrupted!\n" + ie);
        }
	}
	
	public static void main(String args[]) {
		Frame testFrame;
		testFrame = new Frame("Test");
		testFrame.addWindowListener(new java.awt.event.WindowAdapter() {
	        public void windowClosing(java.awt.event.WindowEvent e) {
	            System.exit(0);
	            };
	         });
		TestScene t = new TestScene();
		testFrame.setSize(WIDTH, HEIGHT);
		testFrame.setLocationRelativeTo(null);
		testFrame.setVisible(true);
		testFrame.setResizable(false);
		testFrame.add(t);
		t.init();
		t.start();
	}
}
